(function (q, a, ha) {
    if (!a) throw Error("wangEditor: \u627e\u4e0d\u5230window.jQuery\uff08\u5373\u53c2\u6570 $\uff09\uff0c\u8bf7\u68c0\u67e5\u662f\u5426\u5f15\u7528\u4e86jQuery\uff01"); var S = { codeTargetId: !1, frameHeight: "300px", initStr: "\u6b22\u8fce\u4f7f\u7528<b>wangEitor</b>\uff0c\u8bf7\u8f93\u5165..." }; if ("Microsoft Internet Explorer" === q.navigator.appName && /MSIE\s*(?=5.0|6.0|7.0|8.0)/i.test(q.navigator.appVersion)) a.fn.extend({
        wangEditor: function (d) {
            d = a.extend(S, d); var e = d.initStr, c = d.frameHeight,
            n = d.codeTargetId && "string" === typeof d.codeTargetId ? a("#" + d.codeTargetId) : !1, l = a('<textarea style="width:100%; height:' + c + '"></textarea>'); d = a('<p style="color:#666666;background-color:#f1f1f1;"></p>'); var c = /(<.*?>)|(&.*?;)/gm, q = "\u62b1\u6b49\uff0cIE8\u53ca\u4ee5\u4e0b\u6d4f\u89c8\u5668\u53ea\u80fd\u8f93\u5165\u7eaf\u6587\u672c...", f = function () {
                var a = l.text(), a = a.replace("&", "&amp;").replace("<", "&lt;").replace(">", "&gt;").replace("\n", "<br />").replace(/\s{1}/gm, "&nbsp;"); "input" === n[0].nodeName.toLowerCase() ?
                n.val("<p>" + a + "</p>") : n.text("<p>" + a + "</p>")
            }; c.test(e) && (e = e.replace(c, ""), q = '\u62b1\u6b49\uff0c\u5728IE8\u53ca\u4ee5\u4e0b\u6d4f\u89c8\u5668\u4e2d\u7f16\u8f91<b style="color:red;">\u53ef\u80fd\u4f1a\u4e22\u5931\u6837\u5f0f\u3001\u94fe\u63a5\u6216\u56fe\u7247\uff0c\u8bf7\u614e\u91cd\u4fdd\u5b58\uff01</b>'); l.text(e); d.html(q); n && (l.click(f), l.keyup(f)); this.append(d).append(l)
        }
    }); else {
        var F = "wangeditor_" + Math.random().toString().replace(".", "") + "_", da = function () {
            var a = "\u5b8b\u4f53;\u9ed1\u4f53;\u6977\u4f53;\u96b6\u4e66;\u5e7c\u5706;\u5fae\u8f6f\u96c5\u9ed1;Arial;Verdana;Georgia;Times New Roman;Trebuchet MS;Courier New;Impact;Comic Sans MS".split(";"),
            e = a.length, c = "", n, l; for (n = 0; n < e; n++) l = a[n], c += '<li><a href="#" style="font-family:${0}">${1}</a></li>'.replace("${0}", l).replace("${1}", l); return c
        }(), r = { red: "\u7ea2\u8272", blue: "\u84dd\u8272", green: "\u7eff\u8272", yellow: "\u9ec4\u8272", black: "\u9ed1\u8272", gray: "\u7070\u8272", silver: "\u94f6\u8272" }, ea = function () { var a = "", e, c; for (e in r) Object.prototype.hasOwnProperty.call(r, e) && (c = r[e], a += '<li><a href="#" style="color:${0};">${1}</a></li>'.replace("${0}", e).replace("${1}", c)); return a }(), fa = function () {
            var a =
            "", e, c; for (e in r) Object.prototype.hasOwnProperty.call(r, e) && (c = r[e], a += '<li><a href="#" style="background-color:${0}; color:white;">${1}</a></li>'.replace("${0}", e).replace("${1}", c)); return a
        }(), ga = function () { var a = { 1: "10px", 2: "13px", 3: "16px", 4: "19px", 5: "22px", 6: "25px", 7: "28px" }, e = "", c, n; for (c in a) Object.prototype.hasOwnProperty.call(a, c) && (n = a[c], e += '<li><a href="#" fontSize="${0}" style="font-size:${1};">${2}</a></li>'.replace("${0}", c).replace("${1}", n).replace("${2}", n)); return e }(); a.fn.extend({
            wangEditor: function (d) {
                function e() {
                    B &&
                    ("input" === B[0].nodeName.toLowerCase() ? B.val(g.body.innerHTML) : B.text(g.body.innerHTML))
                } function c(a) {
                    "string" === typeof a && (a = a.toLowerCase()); if ("bold" === a || void 0 === a) g.queryCommandState("bold") ? G.addClass("btn-primary") : G.removeClass("btn-primary"); if ("italic" === a || void 0 === a) g.queryCommandState("italic") ? H.addClass("btn-primary") : H.removeClass("btn-primary"); if ("underline" === a || void 0 === a) g.queryCommandState("underline") ? I.addClass("btn-primary") : I.removeClass("btn-primary"); if ("JustifyLeft" ===
                    a || void 0 === a) g.queryCommandState("JustifyLeft") ? J.addClass("btn-primary") : J.removeClass("btn-primary"); if ("JustifyCenter" === a || void 0 === a) g.queryCommandState("JustifyCenter") ? K.addClass("btn-primary") : K.removeClass("btn-primary"); if ("JustifyRight" === a || void 0 === a) g.queryCommandState("JustifyRight") ? L.addClass("btn-primary") : L.removeClass("btn-primary"); if ("InsertOrderedList" === a || void 0 === a) g.queryCommandState("InsertOrderedList") ? M.addClass("btn-primary") : M.removeClass("btn-primary"); if ("InsertUnorderedList" ===
                    a || void 0 === a) g.queryCommandState("InsertUnorderedList") ? N.addClass("btn-primary") : N.removeClass("btn-primary")
                } function n(a) { var h = a.type; a = a.keyCode; var k = !1, k = [33, 34, 35, 36, 37, 38, 39, 40], k = "keyup" === h && -1 !== k.indexOf(a); if ("click" === h || k) c(), x = g.getSelection().getRangeAt(0) } d = a.extend(S, d); var l = function (a) { if (!a || "string" !== typeof a || 0 === a.length) throw Error("\u9519\u8bef\uff1a\u3010" + a + "\u3011\u4e0d\u662f\u5b57\u7b26\u4e32\uff01"); }, r = a("<div></div>"), f = a('<div class="btn-group"></div>'), b = function (a,
                h, k, b, e, g) {
                    l(a); e ? l(e) : l(h); b && l(b); g && l(g); var c = "", d = "", f = "btn"; k && (f = "btn dropdown-toggle"); a = '<button type="button" title="$title$" class="$class$" $data-Prop$>$content$</button>'.replace("$title$", a).replace("$class$", f); k && (c += ' data-toggle="dropdown" '); b && (c += ' data-target="' + b + '" data-backdrop="false"  data-toggle="modal" '); g && (c += ' singleCommandName="' + g + '" '); a = a.replace("$data-Prop$", c); d = e ? d + e : d + ('<i class="' + h + '"></i>'); k && (d += '<span class="caret"></span>'); return a = a.replace("$content$",
                    d)
                }, y = function (a, h) { l(h); a && l(a); var k = '<ul class="dropdown-menu">${0} ${1}</ul>'; a && (k = k.replace("${0}", '<li class="nav-header">' + a + "</li>")); return k = k.replace("${1}", h) }, z = f.clone(), G = a(b("\u52a0\u7c97", "icon-bold", !1, !1, !1, "bold")), H = a(b("\u659c\u4f53", "icon-italic", !1, !1, !1, "italic")), I = a(b("\u4e0b\u5212\u7ebf", "icon-underline", !1, !1, !1, "underline")); z.append(G).append(H).append(I); var t = f.clone(), C = a(b("\u5b57\u53f7", "icon-text-height", !0)), T = a(y("\u5b57\u53f7\uff1a", ga)); t.append(C).append(T);
                var u = f.clone(), D = a(b("\u5b57\u4f53", "icon-font", !0)), C = a(y("\u5b57\u4f53\uff1a", da)); u.append(D).append(C); var A = f.clone(), p = a(b("\u524d\u666f\u8272", null, !0, null, '<b style="color:red;">A</b>')), D = a(y("\u524d\u666f\u8272\uff1a", ea)); A.append(p).append(D); var E = f.clone(), p = a(b("\u80cc\u666f\u8272", null, !0, null, '<b style="background-color:blue;color:white;">&nbsp;A&nbsp;</b>')), y = a(y("\u80cc\u666f\u8272\uff1a", fa)); E.append(p).append(y); var U = f.clone(), M = a(b("\u6709\u5e8f\u5217\u8868", "icon-list-ol",
                !1, !1, !1, "InsertOrderedList")), N = a(b("\u65e0\u5e8f\u5217\u8868", "icon-list-ul", !1, !1, !1, "InsertUnorderedList")); U.append(N).append(M); var V = f.clone(), J = a(b("\u5de6\u5bf9\u9f50", "icon-align-left", !1, !1, !1, "JustifyLeft")), K = a(b("\u5c45\u4e2d", "icon-align-center", !1, !1, !1, "JustifyCenter")), L = a(b("\u53f3\u5bf9\u9f50", "icon-align-right", !1, !1, !1, "JustifyRight")); V.append(J).append(K).append(L); var W = f.clone(), m = F + "LinkModal", p = a(b("\u94fe\u63a5", "icon-link", !1, "#" + m)), s = a(b("\u5220\u9664\u94fe\u63a5",
                "icon-remove", !1, !1, !1, "unlink")); W.append(p).append(s); var X = f.clone(), s = F + "imgModal", p = a(b("\u63d2\u5165\u56fe\u7247", "icon-picture", !1, "#" + s)); X.append(p); var Y = f.clone(), p = F + "codeModal", O = a(b("\u63d2\u5165\u4ee3\u7801", "icon-edit", !1, "#" + p)); Y.append(O); f = f.clone(); O = a(b("\u64a4\u9500", "icon-undo", !1, !1, !1, "Undo")); b = a(b("\u6062\u590d", "icon-repeat", !1, !1, !1, "Redo")); f.append(O).append(b); b = a('<div class="btn-toolbar"></div>'); b.append(u).append(t).append(z).append(A).append(E).append(U).append(V).append(W).append(X).append(Y).append(f);
                r.append(b).find("button").tooltip({ container: "body" }); var u = a("<div></div>"), A = function (w, h, k, c) {
                    l(w); l(h); var b; w = a('<div id="' + w + '" class="modal hide fade">'); b = a('<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4>' + h + "</h4></div>"); h = a('<div class="modal-body">'); var e = a('<div class="modal-footer">'); w.append(b); if (k && "number" === typeof k.length && 0 < k.length) { for (b = 0; b < k.length; b++) h.append(k[b]); w.append(h) } if (c && "number" ===
                    typeof c.length && 0 < c.length) { for (b = 0; b < c.length; b++) e.append(c[b]); w.append(e) } return w
                }, z = a("<p>\u94fe\u63a5\u5730\u5740\uff1a</p>"), Z = a('<input type="text" placeholder="http(s)://" class="input-block-level"/>'), t = [z, Z], z = a('<a href="#" class="btn btn-primary">\u63d2\u5165\u94fe\u63a5</a>'), $ = A(m, "\u63d2\u5165\u94fe\u63a5", t, [z]), t = a("<p>\u8f93\u5165\u56fe\u7247URL\u5730\u5740\uff1a</p>"), aa = a('<input type="text" placeholder="http(s)://" class="input-block-level"/>'), m = [t, aa], t = a('<a href="#" class="btn btn-primary">\u63d2\u5165</a>'),
                ba = A(s, "\u63d2\u5165\u56fe\u7247", m, [t]), s = a("<div></div>"), m = a("<span>\u8bed\u8a00\uff1a</span>"), P = a('<select class="input-medium"></select>'), E = a("<span>&nbsp;&nbsp;\u4e3b\u9898\uff1a</span>"), Q = a('<select class="input-medium"></select>'); s.append(m).append(P).append(E).append(Q); var R = a('<textarea rows="10" cols="50" style="width:95%"></textarea>'), m = [s, R], s = a('<a href="#" class="btn btn-primary">\u63d2\u5165</a>'), ca = A(p, "\u63d2\u5165\u4ee3\u7801", m, [s]); u.append($).append(ba).append(ca); r.append(u);
                m = a('<div style="width: 100%; height: ' + d.frameHeight + '; border: 1px solid #cccccc;"></div>'); u = a('<iframe frameborder="0" width="100%" height="100%"></iframe>'); p = d.initStr; m.append(u); var g, B = d.codeTargetId && "string" === typeof d.codeTargetId ? a("#" + d.codeTargetId) : !1, v, x; q.wangHighLighter && function () {
                    var b = q.wangHighLighter.getLangArray(), h = b.length, k = "", c = q.wangHighLighter.getThemeArray(), e = c.length, g = "", d, f; for (d = 0; d < h; d++) f = b[d], k += '<option value="' + f + '">' + f + "</option>"; P.append(a(k)); for (d = 0; d <
                    e; d++) f = c[d], g += '<option value="' + f + '">' + f + "</option>"; Q.append(a(g))
                }(); this.append(r); this.append(m); m = u[0].contentWindow; d = a(m); g = m.document; m = a(g); g.open(); g.write('<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title></title></head><body>' + p + "</body></html>"); g.close(); g.designMode = "on"; a(q).load(function () { "off" === g.designMode.toLowerCase() && (g.designMode = "on") }); v = function (a, h, b) { g.execCommand(a, h, b) }; d.blur(e); m.click(n); m.keyup(n); b.find("button").each(function () {
                    var b =
                    a(this), h = b.attr("singleCommandName"); h && b.click(function () { v(h); c(h) })
                }); D.find("a").each(function () { var b = a(this), h = this.style.color; b.click(function (a) { v("ForeColor", !1, h); a.preventDefault() }) }); y.find("a").each(function () { var b = a(this), h = this.style.backgroundColor; b.click(function (a) { v("backColor", !1, h); a.preventDefault() }) }); C.find("a").each(function () { var b = a(this), h = b.css("font-family"); b.click(function (a) { v("FontName", !1, h); a.preventDefault() }) }); T.find("a").each(function () {
                    var b = a(this),
                    h = b.attr("fontSize"); b.click(function (a) { v("FontSize", !1, h); a.preventDefault() })
                }); z.click(function (a) { var b = g.getSelection(), c = Z.val(); $linkModalBody_sltTarget.val(); b && x && (b.removeAllRanges(), b.addRange(x)); v("createLink", !1, c); a.preventDefault(); $.modal("hide") }); t.click(function (a) { var b = g.getSelection(), c = aa.val(); b && x && (b.removeAllRanges(), b.addRange(x)); v("insertImage", !1, c); a.preventDefault(); ba.modal("hide") }); s.click(function (b) {
                    var c = g.getSelection(), d = P.val(), e = Q.val(), f = R.val(); R.val("");
                    if (!q.wangHighLighter) throw Error("\u672a\u5f15\u7528wangHighLighter.js\uff0c\u65e0\u6cd5\u683c\u5f0f\u5316\u4ee3\u7801..."); f = q.wangHighLighter.highLight(d, e, f); c && x && (c.removeAllRanges(), c.addRange(x), c = a(c.focusNode.parentNode), 0 === c.next().length && (f += "<p>&nbsp;</p>"), c.after(a(f))); b.preventDefault(); ca.modal("hide")
                }); r.click(function () { e() })
            }
        })
    }
})(window, window.jQuery);