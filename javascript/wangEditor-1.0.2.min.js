(function (r, a, x) {
    if (!a) throw Error("wangEditor: \u627e\u4e0d\u5230window.jQuery\uff08\u5373\u53c2\u6570 $\uff09\uff0c\u8bf7\u68c0\u67e5\u662f\u5426\u5f15\u7528\u4e86jQuery\uff01"); var U = { codeTargetId: !1, frameHeight: "300px", initStr: "\u6b22\u8fce\u4f7f\u7528<b>wangEitor</b>\uff0c\u8bf7\u8f93\u5165..." }; if ("Microsoft Internet Explorer" === r.navigator.appName && /MSIE\s*(?=5.0|6.0|7.0|8.0)/i.test(r.navigator.appVersion)) x = function (f) {
        f = a.extend(U, f); var c = f.initStr, h = f.frameHeight, m = f.codeTargetId && "string" ===
        typeof f.codeTargetId ? a("#" + f.codeTargetId) : !1, e = a('<textarea style="width:100%; height:' + h + '"></textarea>'); f = a('<p style="color:#666666;background-color:#f1f1f1;"></p>'); var h = /(<.*?>)|(&.*?;)/gm, r = "\u62b1\u6b49\uff0cIE8\u53ca\u4ee5\u4e0b\u6d4f\u89c8\u5668\u53ea\u80fd\u8f93\u5165\u7eaf\u6587\u672c...", k = function () {
            var a = e.text(), a = a.replace("&", "&amp;").replace("<", "&lt;").replace(">", "&gt;").replace("\n", "<br />").replace(/\s{1}/gm, "&nbsp;"); "input" === m[0].nodeName.toLowerCase() ? m.val("<p>" + a +
            "</p>") : m.text("<p>" + a + "</p>")
        }; h.test(c) && (c = c.replace(h, ""), r = '\u62b1\u6b49\uff0c\u5728IE8\u53ca\u4ee5\u4e0b\u6d4f\u89c8\u5668\u4e2d\u7f16\u8f91<b style="color:red;">\u53ef\u80fd\u4f1a\u4e22\u5931\u6837\u5f0f\u3001\u94fe\u63a5\u6216\u56fe\u7247\uff0c\u8bf7\u614e\u91cd\u4fdd\u5b58\uff01</b>'); e.text(c); f.html(r); m && (e.click(k), e.keyup(k)); this.append(f).append(e)
    }; else {
        var E = "wangeditor_" + Math.random().toString().replace(".", "") + "_", ka = function () {
            var a = "\u5b8b\u4f53;\u9ed1\u4f53;\u6977\u4f53;\u96b6\u4e66;\u5e7c\u5706;\u5fae\u8f6f\u96c5\u9ed1;Arial;Verdana;Georgia;Times New Roman;Trebuchet MS;Courier New;Impact;Comic Sans MS".split(";"),
            c = a.length, h = [], m, e; for (m = 0; m < c; m++) e = a[m], h.push('<li><a href="#" style="font-family:${0}">${1}</a></li>'.replace("${0}", e).replace("${1}", e)); return h.join("")
        }(), s = {
            "#880000": "\u6697\u7ea2\u8272", "#800080": "\u7d2b\u8272", "#ff0000": "\u7ea2\u8272", "#ff00ff": "\u9c9c\u7c89\u8272", "#000080": "\u6df1\u84dd\u8272", "#0000ff": "\u84dd\u8272", "#00ffff": "\u6e56\u84dd\u8272", "#008080": "\u84dd\u7eff\u8272", "#008000": "\u7eff\u8272", "#808000": "\u6a44\u6984\u8272", "#00ff00": "\u6d45\u7eff\u8272", "#ffcc00": "\u6a59\u9ec4\u8272",
            "#808080": "\u7070\u8272", "#c0c0c0": "\u94f6\u8272", "#000000": "\u9ed1\u8272"
        }, la = function () { var a = [], c, h; for (c in s) Object.prototype.hasOwnProperty.call(s, c) && (h = s[c], a.push('<li><a href="#" style="color:${0};">${1}</a></li>'.replace("${0}", c).replace("${1}", h))); return a.join("") }(), ma = function () {
            var a = [], c, h; for (c in s) Object.prototype.hasOwnProperty.call(s, c) && (h = s[c], a.push('<li><a href="#"><span style="background-color:${0};">&nbsp;&nbsp;&nbsp;</span> ${1}</a></li>'.replace("${0}", c).replace("${1}",
            h))); return a.join("")
        }(), na = function () { var a = { 1: "10px", 2: "13px", 3: "16px", 4: "19px", 5: "22px", 6: "25px", 7: "28px" }, c = [], h, m; for (h in a) Object.prototype.hasOwnProperty.call(a, h) && (m = a[h], c.push('<li><a href="#" fontSize="${0}" style="font-size:${1};">${2}</a></li>'.replace("${0}", h).replace("${1}", m).replace("${2}", m))); return c.join("") }(); x = function (f) {
            function c() { F && ("input" === F[0].nodeName.toLowerCase() ? F.val(g.body.innerHTML) : F.text(g.body.innerHTML)) } function h(a) {
                "string" === typeof a && (a = a.toLowerCase());
                if ("bold" === a || void 0 === a) g.queryCommandState("bold") ? x.addClass("btn-primary") : x.removeClass("btn-primary"); if ("italic" === a || void 0 === a) g.queryCommandState("italic") ? J.addClass("btn-primary") : J.removeClass("btn-primary"); if ("underline" === a || void 0 === a) g.queryCommandState("underline") ? K.addClass("btn-primary") : K.removeClass("btn-primary"); if ("JustifyLeft" === a || void 0 === a) g.queryCommandState("JustifyLeft") ? L.addClass("btn-primary") : L.removeClass("btn-primary"); if ("JustifyCenter" === a || void 0 === a) g.queryCommandState("JustifyCenter") ?
                M.addClass("btn-primary") : M.removeClass("btn-primary"); if ("JustifyRight" === a || void 0 === a) g.queryCommandState("JustifyRight") ? N.addClass("btn-primary") : N.removeClass("btn-primary"); if ("InsertOrderedList" === a || void 0 === a) g.queryCommandState("InsertOrderedList") ? O.addClass("btn-primary") : O.removeClass("btn-primary"); if ("InsertUnorderedList" === a || void 0 === a) g.queryCommandState("InsertUnorderedList") ? P.addClass("btn-primary") : P.removeClass("btn-primary")
            } function m(a) {
                var d = a.type; a = a.keyCode; var l = !1,
                l = [33, 34, 35, 36, 37, 38, 39, 40], l = "keyup" === d && -1 !== l.indexOf(a); if ("click" === d || l) h(), v = g.getSelection().getRangeAt(0)
            } f = a.extend(U, f); var e = function (a) { if (!a || "string" !== typeof a || 0 === a.length) throw Error("\u9519\u8bef\uff1a\u3010" + a + "\u3011\u4e0d\u662f\u5b57\u7b26\u4e32\uff01"); }, s = a("<div></div>"), k = a('<div class="btn-group"></div>'), b = function (a, d, l, b, G, g) {
                e(a); G ? e(G) : e(d); b && e(b); g && e(g); var c = "", h = "", f = "btn"; l && (f = "btn dropdown-toggle"); a = '<button type="button" title="$title$" class="$class$" $data-Prop$>$content$</button>'.replace("$title$",
                a).replace("$class$", f); l && (c += ' data-toggle="dropdown" '); b && (c += ' data-target="' + b + '" data-backdrop="false"  data-toggle="modal" '); g && (c += ' singleCommandName="' + g + '" '); a = a.replace("$data-Prop$", c); h = G ? h + G : h + ('<i class="' + d + '"></i>'); l && (h += '<span class="caret"></span>'); return a = a.replace("$content$", h)
            }, z = function (a, d) { e(d); a && e(a); var l = '<ul class="dropdown-menu">${0} ${1}</ul>'; a && (l = l.replace("${0}", '<li class="nav-header">' + a + "</li>")); return l = l.replace("${1}", d) }, A = k.clone(), x = a(b("\u52a0\u7c97",
            "icon-bold", !1, !1, !1, "bold")), J = a(b("\u659c\u4f53", "icon-italic", !1, !1, !1, "italic")), K = a(b("\u4e0b\u5212\u7ebf", "icon-underline", !1, !1, !1, "underline")); A.append(x).append(J).append(K); var p = k.clone(), H = a(b("\u5b57\u53f7", "icon-text-height", !0)), V = a(z("\u5b57\u53f7\uff1a", na)); p.append(H).append(V); var t = k.clone(), I = a(b("\u5b57\u4f53", "icon-font", !0)), H = a(z("\u5b57\u4f53\uff1a", ka)); t.append(I).append(H); var n = k.clone(), q = a(b("\u524d\u666f\u8272", null, !0, null, '<b style="color:red;">A</b>')), I = a(z("\u524d\u666f\u8272\uff1a",
            la)); n.append(q).append(I); var D = k.clone(), q = a(b("\u80cc\u666f\u8272", null, !0, null, '<b style="background-color:blue;color:white;">&nbsp;A&nbsp;</b>')), z = a(z("\u80cc\u666f\u8272\uff1a", ma)); D.append(q).append(z); var W = k.clone(), O = a(b("\u6709\u5e8f\u5217\u8868", "icon-list-ol", !1, !1, !1, "InsertOrderedList")), P = a(b("\u65e0\u5e8f\u5217\u8868", "icon-list-ul", !1, !1, !1, "InsertUnorderedList")); W.append(P).append(O); var X = k.clone(), L = a(b("\u5de6\u5bf9\u9f50", "icon-align-left", !1, !1, !1, "JustifyLeft")), M = a(b("\u5c45\u4e2d",
            "icon-align-center", !1, !1, !1, "JustifyCenter")), N = a(b("\u53f3\u5bf9\u9f50", "icon-align-right", !1, !1, !1, "JustifyRight")); X.append(L).append(M).append(N); var Y = k.clone(), B = E + "LinkModal", q = a(b("\u63d2\u5165\u94fe\u63a5", "icon-link", !1, "#" + B)), u = a(b("\u5220\u9664\u94fe\u63a5", "icon-remove", !1, !1, !1, "unlink")); Y.append(q).append(u); var Z = k.clone(), C = E + "TableModal", q = a(b("\u63d2\u5165\u8868\u683c", "icon-table", !1, "#" + C)); Z.append(q); var $ = k.clone(), u = E + "imgModal", q = a(b("\u63d2\u5165\u56fe\u7247", "icon-picture",
            !1, "#" + u)); $.append(q); var aa = k.clone(), q = E + "codeModal", Q = a(b("\u63d2\u5165\u4ee3\u7801", void 0, !1, "#" + q, '<i class="icon-angle-left"></i>%<i class="icon-angle-right"></i>')); aa.append(Q); k = k.clone(); Q = a(b("\u64a4\u9500", "icon-undo", !1, !1, !1, "Undo")); b = a(b("\u6062\u590d", "icon-repeat", !1, !1, !1, "Redo")); k.append(Q).append(b); b = a('<div class="btn-toolbar"></div>'); b.append(t).append(p).append(A).append(n).append(D).append(W).append(X).append(Y).append(Z).append($).append(aa).append(k); s.append(b).find("button").tooltip({ container: "body" });
            var p = a("<div></div>"), t = function (y, d, l, c) {
                e(y); e(d); var b; y = a('<div id="' + y + '" class="modal hide fade">'); b = a('<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4>' + d + "</h4></div>"); d = a('<div class="modal-body">'); var g = a('<div class="modal-footer">'); y.append(b); if (l && "number" === typeof l.length && 0 < l.length) { for (b = 0; b < l.length; b++) d.append(l[b]); y.append(d) } if (c && "number" === typeof c.length && 0 < c.length) {
                    for (b = 0; b < c.length; b++) g.append(c[b]);
                    y.append(g)
                } return y
            }, A = a("<p>\u94fe\u63a5\u5730\u5740\uff1a</p>"), ba = a('<input type="text" placeholder="http(s)://" class="input-block-level"/>'), n = [A, ba], A = a('<a href="#" class="btn btn-primary">\u63d2\u5165\u94fe\u63a5</a>'), ca = t(B, "\u63d2\u5165\u94fe\u63a5", n, [A]), B = a("<span>\u884c\u6570\uff1a</span>"), da = a('<input type="text" style="width:50px;" value="3"/>'), n = a("<span>&nbsp;&nbsp;&nbsp;&nbsp;\u5217\u6570\uff1a</span>"), ea = a('<input type="text" style="width:50px;" value="5"/>'), D = a("<span>&nbsp;&nbsp;&nbsp;&nbsp;\u9996\u884c\u52a0\u7c97 </span>"),
            fa = a('<input type="checkbox" checked="checked"/>'), n = [B, da, n, ea, D, fa], B = a('<a href="#" class="btn btn-primary">\u63d2\u5165\u8868\u683c</a>'), ga = t(C, "\u63d2\u5165\u8868\u683c", n, [B]), C = a("<p>\u8f93\u5165\u56fe\u7247URL\u5730\u5740\uff1a</p>"), ha = a('<input type="text" placeholder="http(s)://" class="input-block-level"/>'), n = [C, ha], C = a('<a href="#" class="btn btn-primary">\u63d2\u5165</a>'), ia = t(u, "\u63d2\u5165\u56fe\u7247", n, [C]), u = a("<div></div>"), n = a("<span>\u8bed\u8a00\uff1a</span>"), R = a('<select class="input-medium"></select>'),
            D = a("<span>&nbsp;&nbsp;\u4e3b\u9898\uff1a</span>"), S = a('<select class="input-medium"></select>'); u.append(n).append(R).append(D).append(S); var T = a('<textarea rows="10" cols="50" style="width:95%"></textarea>'), n = [u, T], u = a('<a href="#" class="btn btn-primary">\u63d2\u5165</a>'), ja = t(q, "\u63d2\u5165\u4ee3\u7801", n, [u]); p.append(ca).append(ia).append(ja).append(ga); s.append(p); p = a('<div style="width: 100%; height: ' + f.frameHeight + '; border: 1px solid #cccccc;"></div>'); t = a('<iframe frameborder="0" width="100%" height="100%"></iframe>');
            q = f.initStr; p.append(t); var g, F = f.codeTargetId && "string" === typeof f.codeTargetId ? a("#" + f.codeTargetId) : !1, w, v; r.wangHighLighter && function () { var b = r.wangHighLighter.getLangArray(), d = b.length, l = [], c = r.wangHighLighter.getThemeArray(), g = c.length, h = [], f, e; for (f = 0; f < d; f++) e = b[f], l.push('<option value="' + e + '">' + e + "</option>"); R.append(a(l.join(""))); for (f = 0; f < g; f++) e = c[f], h.push('<option value="' + e + '">' + e + "</option>"); S.append(a(h.join(""))) }(); this.append(s); this.append(p); p = t[0].contentWindow; f = a(p); g =
            p.document; p = a(g); g.open(); g.write('<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title></title></head><body>' + q + "</body></html>"); g.close(); g.designMode = "on"; a(r).load(function () { "off" === g.designMode.toLowerCase() && (g.designMode = "on") }); w = function (a, d, b) { g.execCommand(a, d, b) }; f.blur(c); p.click(m); p.keyup(m); b.find("button").each(function () { var b = a(this), d = b.attr("singleCommandName"); d && b.click(function () { w(d); h(d) }) }); I.find("a").each(function () {
                var b = a(this), d = this.style.color;
                b.click(function (a) { w("ForeColor", !1, d); a.preventDefault() })
            }); z.find("a").each(function () { var b = a(this), d = b.children().first()[0].style.backgroundColor; b.click(function (a) { w("backColor", !1, d); a.preventDefault() }) }); H.find("a").each(function () { var b = a(this), d = b.css("font-family"); b.click(function (a) { w("FontName", !1, d); a.preventDefault() }) }); V.find("a").each(function () { var b = a(this), d = b.attr("fontSize"); b.click(function (a) { w("FontSize", !1, d); a.preventDefault() }) }); A.click(function (a) {
                var b = g.getSelection(),
                c = ba.val(); $linkModalBody_sltTarget.val(); b && v && (b.removeAllRanges(), b.addRange(v)); w("createLink", !1, c); a.preventDefault(); ca.modal("hide")
            }); B.click(function (b) {
                var d = g.getSelection(), c = da.val(), c = isNaN(+c) ? 3 : c, f = ea.val(), f = isNaN(+f) ? 5 : f, h = fa.is(":checked"), e, k; e = ""; var m, p = [], n = [], q = '<td style="width:100px; ${style}">&nbsp;</td>'; m = '<table border="0" cellpadding="0" cellspacing="0" style="${style}" > ${content} </table>'.replace("${style}", "border-left:1px solid #cccccc;border-top:1px solid #cccccc;");
                q = q.replace("${style}", "border-bottom:1px solid #cccccc;border-right:1px solid #cccccc;"); for (e = 0; e < c; e++) { n = []; for (k = 0; k < f; k++) n.push(q); 0 === e && h ? p.push('<tr style="font-weight:bold;background-color:#f1f1f1;">${content}</tr>'.replace("${content}", n.join(""))) : p.push("<tr>${content}</tr>".replace("${content}", n.join(""))) } e = m.replace("${content}", p.join("")); d && v && (d.removeAllRanges(), d.addRange(v), d = 3 === d.focusNode.nodeType ? a(d.focusNode.parentNode) : a(d.focusNode), 0 === d.next().length && (e += "<p>&nbsp;</p>"),
                d.after(a(e))); b.preventDefault(); ga.modal("hide")
            }); C.click(function (a) { var b = g.getSelection(), c = ha.val(); b && v && (b.removeAllRanges(), b.addRange(v)); w("insertImage", !1, c); a.preventDefault(); ia.modal("hide") }); u.click(function (b) {
                var d = g.getSelection(), c = R.val(), f = S.val(), e = T.val(); T.val(""); if (!r.wangHighLighter) throw Error("\u672a\u5f15\u7528wangHighLighter.js\uff0c\u65e0\u6cd5\u683c\u5f0f\u5316\u4ee3\u7801..."); e = r.wangHighLighter.highLight(c, f, e); d && v && (d.removeAllRanges(), d.addRange(v), d = 3 ===
                d.focusNode.nodeType ? a(d.focusNode.parentNode) : a(d.focusNode), 0 === d.next().length && (e += "<p>&nbsp;</p>"), d.after(a(e))); b.preventDefault(); ja.modal("hide")
            }); s.click(function () { c() })
        }
    } a.fn.extend({ wangEditor: x })
})(window, window.jQuery);