(function (p, a, v) {
    if (!a) throw Error("wangEditor: \u627e\u4e0d\u5230window.jQuery\uff08\u5373\u53c2\u6570 $\uff09\uff0c\u8bf7\u68c0\u67e5\u662f\u5426\u5f15\u7528\u4e86jQuery\uff01"); var V = { codeTargetId: !1, frameHeight: "300px", smallBtn: !1, initStr: "\u6b22\u8fce\u4f7f\u7528<b>wangEitor</b>\uff0c\u8bf7\u8f93\u5165..." }; if ("Microsoft Internet Explorer" === p.navigator.appName && /MSIE\s*(?=5.0|6.0|7.0|8.0)/i.test(p.navigator.appVersion)) v = function (e) {
        e = a.extend(V, e); var n = e.initStr, q = e.frameHeight, w = e.codeTargetId &&
        "string" === typeof e.codeTargetId ? a("#" + e.codeTargetId) : !1, l = a('<textarea style="width:100%; height:' + q + '"></textarea>'); e = a('<p style="color:#666666;background-color:#f1f1f1;"></p>'); var q = /(<.*?>)|(&.*?;)/gm, p = "\u62b1\u6b49\uff0cIE8\u53ca\u4ee5\u4e0b\u6d4f\u89c8\u5668\u53ea\u80fd\u8f93\u5165\u7eaf\u6587\u672c...", f = function () {
            var a = l.text(), a = a.replace("&", "&amp;").replace("<", "&lt;").replace(">", "&gt;").replace("\n", "<br />").replace(/\s{1}/gm, "&nbsp;"); "input" === w[0].nodeName.toLowerCase() ? w.val("<p>" +
            a + "</p>") : w.text("<p>" + a + "</p>")
        }; q.test(n) && (n = n.replace(q, ""), p = '\u62b1\u6b49\uff0c\u5728IE8\u53ca\u4ee5\u4e0b\u6d4f\u89c8\u5668\u4e2d\u7f16\u8f91<b style="color:red;">\u53ef\u80fd\u4f1a\u4e22\u5931\u6837\u5f0f\u3001\u94fe\u63a5\u6216\u56fe\u7247\uff0c\u8bf7\u614e\u91cd\u4fdd\u5b58\uff01</b>'); l.text(n); e.html(p); w && (l.click(f), l.keyup(f)); this.append(e).append(l)
    }; else {
        var E = "wangeditor_" + Math.random().toString().replace(".", "") + "_", la = function () {
            var e = "\u5b8b\u4f53;\u9ed1\u4f53;\u6977\u4f53;\u96b6\u4e66;\u5e7c\u5706;\u5fae\u8f6f\u96c5\u9ed1;Arial;Verdana;Georgia;Times New Roman;Trebuchet MS;Courier New;Impact;Comic Sans MS".split(";");
            return function () { var n = []; a.each(e, function (a, e) { n.push('<li><a href="#" style="font-family:${0}">${1}</a></li>'.replace("${0}", e).replace("${1}", e)) }); return n.join("") }()
        }(), C = {
            "#880000": "\u6697\u7ea2\u8272", "#800080": "\u7d2b\u8272", "#ff0000": "\u7ea2\u8272", "#ff00ff": "\u9c9c\u7c89\u8272", "#000080": "\u6df1\u84dd\u8272", "#0000ff": "\u84dd\u8272", "#00ffff": "\u6e56\u84dd\u8272", "#008080": "\u84dd\u7eff\u8272", "#008000": "\u7eff\u8272", "#808000": "\u6a44\u6984\u8272", "#00ff00": "\u6d45\u7eff\u8272", "#ffcc00": "\u6a59\u9ec4\u8272",
            "#808080": "\u7070\u8272", "#c0c0c0": "\u94f6\u8272", "#000000": "\u9ed1\u8272"
        }, ma = function () { return function () { var e = []; a.each(C, function (a, q) { e.push('<li><a href="#" style="color:${0};">${1}</a></li>'.replace("${0}", a).replace("${1}", q)) }); return e.join("") }() }(), na = function () { return function () { var e = []; a.each(C, function (a, q) { e.push('<li><a href="#"><span style="background-color:${0};">&nbsp;&nbsp;&nbsp;</span> ${1}</a></li>'.replace("${0}", a).replace("${1}", q)) }); return e.join("") }() }(), oa = function () {
            var e =
            { 1: "10px", 2: "13px", 3: "16px", 4: "19px", 5: "22px", 6: "25px", 7: "28px" }; return function () { var n = []; a.each(e, function (a, e) { n.push('<li><a href="#" fontSize="${0}" style="font-size:${1};">${2}</a></li>'.replace("${0}", a).replace("${1}", e).replace("${2}", e)) }); return n.join("") }()
        }(); v = function (e) {
            function n() { F && ("input" === F[0].nodeName.toLowerCase() ? F.val(h.body.innerHTML) : F.text(h.body.innerHTML)) } function q(d) {
                "string" === typeof d && (d = d.toLowerCase()); if ("bold" === d || void 0 === d) h.queryCommandState("bold") ?
                v.addClass("btn-primary") : v.removeClass("btn-primary"); if ("italic" === d || void 0 === d) h.queryCommandState("italic") ? K.addClass("btn-primary") : K.removeClass("btn-primary"); if ("underline" === d || void 0 === d) h.queryCommandState("underline") ? L.addClass("btn-primary") : L.removeClass("btn-primary"); if ("JustifyLeft" === d || void 0 === d) h.queryCommandState("JustifyLeft") ? M.addClass("btn-primary") : M.removeClass("btn-primary"); if ("JustifyCenter" === d || void 0 === d) h.queryCommandState("JustifyCenter") ? N.addClass("btn-primary") :
                N.removeClass("btn-primary"); if ("JustifyRight" === d || void 0 === d) h.queryCommandState("JustifyRight") ? O.addClass("btn-primary") : O.removeClass("btn-primary"); if ("InsertOrderedList" === d || void 0 === d) h.queryCommandState("InsertOrderedList") ? P.addClass("btn-primary") : P.removeClass("btn-primary"); if ("InsertUnorderedList" === d || void 0 === d) h.queryCommandState("InsertUnorderedList") ? Q.addClass("btn-primary") : Q.removeClass("btn-primary"); G.find(".dropdown-menu").each(function () {
                    var d = a(this); "none" !== d.css("display") &&
                    d.prev().dropdown("toggle")
                })
            } function w(a) { var b = a.type; a = a.keyCode; var m = !1, m = [33, 34, 35, 36, 37, 38, 39, 40], m = "keyup" === b && -1 !== m.indexOf(a); if ("click" === b || m) q(), t = h.getSelection().getRangeAt(0) } e = a.extend(V, e); var l = function (a) { if (!a || "string" !== typeof a || 0 === a.length) throw Error("\u9519\u8bef\uff1a\u3010" + a + "\u3011\u4e0d\u662f\u5b57\u7b26\u4e32\uff01"); }, D = a('<div style="background-color:#f1f1f1;"></div>'), f = a('<div class="btn-group"></div>'), c = function (a, b, m, c, h, H) {
                l(a); h ? l(h) : l(b); c && l(c); H && l(H);
                var f = "", g = "", k = "btn btn-default"; m && (k += " dropdown-toggle"); e.smallBtn && (k += " btn-sm"); m && (f += ' data-toggle="dropdown" '); c && (f += ' data-target="' + c + '" data-backdrop="false"  data-toggle="modal" '); H && (f += ' singleCommandName="' + H + '" '); a = '<button type="button" title="$title$" class="$class$" $data-Prop$>$content$</button>'.replace("$data-Prop$", f).replace("$title$", a).replace("$class$", k); g = h ? g + h : g + ('<i class="' + b + '"></i>'); m && (g += '<span class="caret"></span>'); return a = a.replace("$content$", g)
            },
            x = function (a, b) { l(b); a && l(a); var m = '<ul class="dropdown-menu">${0} ${1}</ul>'; a && (m = m.replace("${0}", '<li class="dropdown-header">' + a + "</li>")); return m = m.replace("${1}", b) }, y = f.clone(), v = a(c("\u52a0\u7c97", "fa fa-bold", !1, !1, !1, "bold")), K = a(c("\u659c\u4f53", "fa fa-italic", !1, !1, !1, "italic")), L = a(c("\u4e0b\u5212\u7ebf", "fa fa-underline", !1, !1, !1, "underline")); y.append(v).append(K).append(L); var r = f.clone(), I = a(c("\u5b57\u53f7", "fa fa-text-height", !0)), C = a(x("\u5b57\u53f7\uff1a", oa)); r.append(I).append(C);
            var g = f.clone(), J = a(c("\u5b57\u4f53", "fa fa-font", !0)), I = a(x("\u5b57\u4f53\uff1a", la)); g.append(J).append(I); var B = f.clone(), k = a(c("\u524d\u666f\u8272", null, !0, null, '<b style="color:red;">A</b>')), J = a(x("\u524d\u666f\u8272\uff1a", ma)); B.append(k).append(J); var W = f.clone(), k = a(c("\u80cc\u666f\u8272", null, !0, null, '<b style="background-color:blue;color:white;">&nbsp;A&nbsp;</b>')), x = a(x("\u80cc\u666f\u8272\uff1a", na)); W.append(k).append(x); var X = f.clone(), P = a(c("\u6709\u5e8f\u5217\u8868", "fa fa-list-ol",
            !1, !1, !1, "InsertOrderedList")), Q = a(c("\u65e0\u5e8f\u5217\u8868", "fa fa-list-ul", !1, !1, !1, "InsertUnorderedList")); X.append(Q).append(P); var Y = f.clone(), M = a(c("\u5de6\u5bf9\u9f50", "fa fa-align-left", !1, !1, !1, "JustifyLeft")), N = a(c("\u5c45\u4e2d", "fa fa-align-center", !1, !1, !1, "JustifyCenter")), O = a(c("\u53f3\u5bf9\u9f50", "fa fa-align-right", !1, !1, !1, "JustifyRight")); Y.append(M).append(N).append(O); var Z = f.clone(), z = E + "LinkModal", k = a(c("\u63d2\u5165\u94fe\u63a5", "fa fa-link", !1, "#" + z)), s = a(c("\u5220\u9664\u94fe\u63a5",
            "fa fa-unlink", !1, !1, !1, "unlink")); Z.append(k).append(s); var $ = f.clone(), A = E + "TableModal", k = a(c("\u63d2\u5165\u8868\u683c", "fa fa-table", !1, "#" + A)); $.append(k); var aa = f.clone(), s = E + "imgModal", k = a(c("\u63d2\u5165\u56fe\u7247", "fa fa-image", !1, "#" + s)); aa.append(k); var ba = f.clone(), k = E + "codeModal", R = a(c("\u63d2\u5165\u4ee3\u7801", void 0, !1, "#" + k, '<i class="fa fa-angle-left"></i>%<i class="fa fa-angle-right"></i>')); ba.append(R); f = f.clone(); R = a(c("\u64a4\u9500", "fa fa-undo", !1, !1, !1, "Undo")); c = a(c("\u6062\u590d",
            "fa fa-repeat", !1, !1, !1, "Redo")); f.append(R).append(c); var G = a('<div class="btn-toolbar" style="padding:5px;margin-top:0px;margin-bottom:0px;"></div>'); G.append(g).append(r).append(y).append(B).append(W).append(X).append(Y).append(Z).append($).append(aa).append(ba).append(f); D.append(G).find("button[title]").tooltip({ container: "body" }); var r = a("<div></div>"), c = function (d, b, m, c) {
                l(d); l(b); d = a('<div id="' + d + '" class="modal fade" role="dialog">'); var e = a('<div class="modal-dialog">'); d.append(e); var h =
                a('<div class="modal-content">'); e.append(h); b = a('<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4>' + b + "</h4></div>"); var f = a('<div class="modal-body">'), g = a('<div class="modal-footer">'); h.append(b); m && "number" === typeof m.length && 0 < m.length && (a.each(m, function (a, b) { f.append(b) }), h.append(f)); c && "number" === typeof c.length && 0 < c.length && (a.each(c, function (a, b) { g.append(b) }), h.append(g)); return d
            }, y = a("<p>\u94fe\u63a5\u5730\u5740\uff1a</p>"),
            ca = a('<input type="text" placeholder="http(s)://" class="form-control"/>'), g = [y, ca], y = a('<a href="#" class="btn btn-primary">\u63d2\u5165\u94fe\u63a5</a>'), da = c(z, "\u63d2\u5165\u94fe\u63a5", g, [y]), z = a("<span>\u884c\u6570\uff1a</span>"), ea = a('<input type="text" style="width:50px;" value="3"/>'), g = a("<span>&nbsp;&nbsp;&nbsp;&nbsp;\u5217\u6570\uff1a</span>"), fa = a('<input type="text" style="width:50px;" value="5"/>'), B = a("<span>&nbsp;&nbsp;&nbsp;&nbsp;\u9996\u884c\u52a0\u7c97 </span>"), ga = a('<input type="checkbox" checked="checked"/>'),
            g = [z, ea, g, fa, B, ga], z = a('<a href="#" class="btn btn-primary">\u63d2\u5165\u8868\u683c</a>'), ha = c(A, "\u63d2\u5165\u8868\u683c", g, [z]), A = a("<p>\u8f93\u5165\u56fe\u7247URL\u5730\u5740\uff1a</p>"), ia = a('<input type="text" placeholder="http(s)://" class="form-control"/>'), g = [A, ia], A = a('<a href="#" class="btn btn-primary">\u63d2\u5165</a>'), ja = c(s, "\u63d2\u5165\u56fe\u7247", g, [A]), s = a("<div></div>"), g = a("<span>\u8bed\u8a00\uff1a</span>"), S = a('<select class="input-medium"></select>'), B = a("<span>&nbsp;&nbsp;\u4e3b\u9898\uff1a</span>"),
            T = a('<select class="input-medium"></select>'); s.append(g).append(S).append(B).append(T); var U = a('<textarea rows="10" class="form-control"></textarea>'), g = [s, U], s = a('<a href="#" class="btn btn-primary">\u63d2\u5165</a>'), ka = c(k, "\u63d2\u5165\u4ee3\u7801", g, [s]); r.append(da).append(ja).append(ka).append(ha); D.append(r); r = a('<div style="width: 100%; height: ' + e.frameHeight + ';"></div>'); c = a('<iframe frameborder="0" width="100%" height="100%"></iframe>'); k = e.initStr; r.append(c); var h, F = e.codeTargetId &&
            "string" === typeof e.codeTargetId ? a("#" + e.codeTargetId) : !1, u, t; p.wangHighLighter && function () { var d = p.wangHighLighter.getLangArray(), b = [], c = p.wangHighLighter.getThemeArray(), e = []; a.each(d, function (a, d) { b.push('<option value="' + d + '">' + d + "</option>") }); S.append(a(b.join(""))); a.each(c, function (a, b) { e.push('<option value="' + b + '">' + b + "</option>") }); T.append(a(e.join(""))) }(); this.css({ border: "1px solid #cccccc" }); this.append(D); this.append(r); c = c[0].contentWindow; r = a(c); h = c.document; c = a(h); h.open(); h.write('<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title></title></head><body>' +
            k + "</body></html>"); h.close(); h.designMode = "on"; a(p).load(function () { "off" === h.designMode.toLowerCase() && (h.designMode = "on") }); u = function (a, b, c) { h.execCommand(a, b, c) }; r.blur(n); c.click(w); c.keyup(w); G.find("button").each(function () { var d = a(this), b = d.attr("singleCommandName"); b && d.click(function () { u(b); q(b) }) }); J.find("a").each(function () { var d = a(this), b = this.style.color; d.click(function (a) { u("ForeColor", !1, b); a.preventDefault() }) }); x.find("a").each(function () {
                var d = a(this), b = d.children().first()[0].style.backgroundColor;
                d.click(function (a) { u("backColor", !1, b); a.preventDefault() })
            }); I.find("a").each(function () { var d = a(this), b = d.css("font-family"); d.click(function (a) { u("FontName", !1, b); a.preventDefault() }) }); C.find("a").each(function () { var d = a(this), b = d.attr("fontSize"); d.click(function (a) { u("FontSize", !1, b); a.preventDefault() }) }); y.click(function (a) { var b = h.getSelection(), c = ca.val(); b && t && (b.removeAllRanges(), b.addRange(t)); u("createLink", !1, c); a.preventDefault(); da.modal("hide") }); z.click(function (d) {
                var b = h.getSelection(),
                c = ea.val(), c = isNaN(+c) ? 3 : c, e = fa.val(), e = isNaN(+e) ? 5 : e, f = ga.is(":checked"), g, k; g = ""; var l, n = [], p = [], q = '<td style="width:100px; ${style}">&nbsp;</td>'; l = '<table border="0" cellpadding="0" cellspacing="0" style="${style}" > ${content} </table>'.replace("${style}", "border-left:1px solid #cccccc;border-top:1px solid #cccccc;"); q = q.replace("${style}", "border-bottom:1px solid #cccccc;border-right:1px solid #cccccc;"); for (g = 0; g < c; g++) {
                    p = []; for (k = 0; k < e; k++) p.push(q); 0 === g && f ? n.push('<tr style="font-weight:bold;background-color:#f1f1f1;">${content}</tr>'.replace("${content}",
                    p.join(""))) : n.push("<tr>${content}</tr>".replace("${content}", p.join("")))
                } g = l.replace("${content}", n.join("")); b && t && (b.removeAllRanges(), b.addRange(t), b = 3 === b.focusNode.nodeType ? a(b.focusNode.parentNode) : a(b.focusNode), 0 === b.next().length && (g += "<p>&nbsp;</p>"), b.after(a(g))); d.preventDefault(); ha.modal("hide")
            }); A.click(function (a) { var b = h.getSelection(), c = ia.val(); b && t && (b.removeAllRanges(), b.addRange(t)); u("insertImage", !1, c); a.preventDefault(); ja.modal("hide") }); s.click(function (c) {
                var b = h.getSelection(),
                e = S.val(), g = T.val(), f = U.val(); U.val(""); if (!p.wangHighLighter) throw Error("\u672a\u5f15\u7528wangHighLighter.js\uff0c\u65e0\u6cd5\u683c\u5f0f\u5316\u4ee3\u7801..."); f = p.wangHighLighter.highLight(e, g, f); b && t && (b.removeAllRanges(), b.addRange(t), b = 3 === b.focusNode.nodeType ? a(b.focusNode.parentNode) : a(b.focusNode), 0 === b.next().length && (f += "<p>&nbsp;</p>"), b.after(a(f))); c.preventDefault(); ka.modal("hide")
            }); D.click(function () { n() })
        }
    } a.fn.extend({ wangEditor: v })
})(window, window.jQuery);