(function (f, a, y) {
    if (!a) throw Error("wangEditor: \u627e\u4e0d\u5230window.jQuery\uff08\u5373\u53c2\u6570 $\uff09\uff0c\u8bf7\u68c0\u67e5\u662f\u5426\u5f15\u7528\u4e86jQuery\uff01"); var R = { codeTargetId: !1, frameHeight: "300px", smallBtn: !1, initStr: "\u6b22\u8fce\u4f7f\u7528<b>wangEitor</b>\uff0c\u8bf7\u8f93\u5165..." }; if ("Microsoft Internet Explorer" === f.navigator.appName && /MSIE\s*(?=5.0|6.0|7.0|8.0)/i.test(f.navigator.appVersion)) y = function (b) {
        b = a.extend(R, b); var m = b.initStr, t = b.frameHeight, v = b.codeTargetId &&
        "string" === typeof b.codeTargetId ? a("#" + b.codeTargetId) : !1, f = a('<textarea style="width:100%; height:' + t + '"></textarea>'); b = a('<p style="color:#666666;background-color:#f1f1f1;"></p>'); var t = /(<.*?>)|(&.*?;)/gm, z = "\u62b1\u6b49\uff0cIE8\u53ca\u4ee5\u4e0b\u6d4f\u89c8\u5668\u53ea\u80fd\u8f93\u5165\u7eaf\u6587\u672c...", A = function () {
            var a = f.text(), a = a.replace("&", "&amp;").replace("<", "&lt;").replace(">", "&gt;").replace("\n", "<br />").replace(/\s{1}/gm, "&nbsp;"); "input" === v[0].nodeName.toLowerCase() ? v.val("<p>" +
            a + "</p>") : v.text("<p>" + a + "</p>")
        }; t.test(m) && (m = m.replace(t, ""), z = '\u62b1\u6b49\uff0c\u5728IE8\u53ca\u4ee5\u4e0b\u6d4f\u89c8\u5668\u4e2d\u7f16\u8f91<b style="color:red;">\u53ef\u80fd\u4f1a\u4e22\u5931\u6837\u5f0f\u3001\u94fe\u63a5\u6216\u56fe\u7247\uff0c\u8bf7\u614e\u91cd\u4fdd\u5b58\uff01</b>'); f.text(m); b.html(z); v && (f.click(A), f.keyup(A)); this.append(b).append(f)
    }; else {
        var I = "wangeditor_" + Math.random().toString().replace(".", "") + "_", ha = function () {
            var b = "\u5b8b\u4f53;\u9ed1\u4f53;\u6977\u4f53;\u96b6\u4e66;\u5e7c\u5706;\u5fae\u8f6f\u96c5\u9ed1;Arial;Verdana;Georgia;Times New Roman;Trebuchet MS;Courier New;Impact;Comic Sans MS".split(";");
            return function () { var m = []; a.each(b, function (a, b) { m.push('<li><a href="#" style="font-family:${0}">${1}</a></li>'.replace("${0}", b).replace("${1}", b)) }); return m.join("") }()
        }(), F = {
            "#880000": "\u6697\u7ea2\u8272", "#800080": "\u7d2b\u8272", "#ff0000": "\u7ea2\u8272", "#ff00ff": "\u9c9c\u7c89\u8272", "#000080": "\u6df1\u84dd\u8272", "#0000ff": "\u84dd\u8272", "#00ffff": "\u6e56\u84dd\u8272", "#008080": "\u84dd\u7eff\u8272", "#008000": "\u7eff\u8272", "#808000": "\u6a44\u6984\u8272", "#00ff00": "\u6d45\u7eff\u8272", "#ffcc00": "\u6a59\u9ec4\u8272",
            "#808080": "\u7070\u8272", "#c0c0c0": "\u94f6\u8272", "#000000": "\u9ed1\u8272"
        }, ia = function () { return function () { var b = []; a.each(F, function (a, f) { b.push('<li><a href="#" style="color:${0};">${1}</a></li>'.replace("${0}", a).replace("${1}", f)) }); return b.join("") }() }(), ja = function () { return function () { var b = []; a.each(F, function (a, f) { b.push('<li><a href="#"><span style="background-color:${0};">&nbsp;&nbsp;&nbsp;</span> ${1}</a></li>'.replace("${0}", a).replace("${1}", f)) }); return b.join("") }() }(), ka = function () {
            var b =
            { 1: "10px", 2: "13px", 3: "16px", 4: "19px", 5: "22px", 6: "25px", 7: "28px" }; return function () { var f = []; a.each(b, function (a, b) { f.push('<li><a href="#" fontSize="${0}" style="font-size:${1};">${2}</a></li>'.replace("${0}", a).replace("${1}", b).replace("${2}", b)) }); return f.join("") }()
        }(); y = function (b) {
            function m() { J && ("input" === J[0].nodeName.toLowerCase() ? J.val(h.body.innerHTML) : J.text(h.body.innerHTML)) } function t(k) {
                "string" === typeof k && (k = k.toLowerCase()); G.find("button[singleCommandName]").each(function () {
                    var c =
                    a(this), n = c.attr("singleCommandName"); if (k === n || void 0 === k) h.queryCommandState(n) ? c.addClass("btn-primary") : c.removeClass("btn-primary")
                }); G.find(".dropdown-menu").each(function () { var k = a(this); "none" !== k.css("display") && k.prev().dropdown("toggle") })
            } function v() { z(); return h.getSelection().focusNode } function y() { var a = H.getSelection(); L = a.getRangeAt && a.rangeCount ? a.getRangeAt(0) : void 0 } function z() { var a = H.getSelection(); if (L) { try { a.removeAllRanges() } catch (c) { h.body.createTextRange().select(), h.selection.empty() } a.addRange(L) } }
            function A(k) { return "body" === k.parentNode.nodeName.toLowerCase() ? a(k) : "body" === k.nodeName.toLowerCase() ? a(k).children().last() : A(k.parentNode) } b = a.extend(R, b); var r = function (a) { if (!a || "string" !== typeof a || 0 === a.length) throw Error("\u9519\u8bef\uff1a\u3010" + a + "\u3011\u4e0d\u662f\u5b57\u7b26\u4e32\uff01"); }, B = a('<div style="background-color:#f1f1f1;"></div>'), e = a('<div class="btn-group"></div>'), d = function (a, c, n, d, e, f) {
                r(a); e ? r(e) : r(c); d && r(d); f && r(f); var g = "", h = "", l = "btn btn-default"; n && (l += " dropdown-toggle");
                b.smallBtn && (l += " btn-sm"); n && (g += ' data-toggle="dropdown" '); d && (g += ' data-target="' + d + '" data-backdrop="false"  data-toggle="modal" '); f && (g += ' singleCommandName="' + f + '" '); a = '<button type="button" title="$title$" class="$class$" $data-Prop$>$content$</button>'.replace("$data-Prop$", g).replace("$title$", a).replace("$class$", l); h = e ? h + e : h + ('<i class="' + c + '"></i>'); n && (h += '<span class="caret"></span>'); return a = a.replace("$content$", h)
            }, w = function (a, c) {
                r(c); a && r(a); var n = '<ul class="dropdown-menu">${0} ${1}</ul>';
                a && (n = n.replace("${0}", '<li class="dropdown-header">' + a + "</li>")); return n = n.replace("${1}", c)
            }, x = e.clone(), K = a(d("\u52a0\u7c97", "fa fa-bold", !1, !1, !1, "bold")), C = a(d("\u659c\u4f53", "fa fa-italic", !1, !1, !1, "italic")), D = a(d("\u4e0b\u5212\u7ebf", "fa fa-underline", !1, !1, !1, "underline")); x.append(K).append(C).append(D); var s = e.clone(), C = a(d("\u5b57\u53f7", "fa fa-text-height", !0)), K = a(w("\u5b57\u53f7\uff1a", ka)); s.append(C).append(K); var p = e.clone(), D = a(d("\u5b57\u4f53", "fa fa-font", !0)), C = a(w("\u5b57\u4f53\uff1a",
            ha)); p.append(D).append(C); var q = e.clone(), g = a(d("\u524d\u666f\u8272", null, !0, null, '<b style="color:red;">A</b>')), D = a(w("\u524d\u666f\u8272\uff1a", ia)); q.append(g).append(D); var F = e.clone(), g = a(d("\u80cc\u666f\u8272", null, !0, null, '<b style="background-color:blue;color:white;">&nbsp;A&nbsp;</b>')), w = a(w("\u80cc\u666f\u8272\uff1a", ja)); F.append(g).append(w); var S = e.clone(), g = a(d("\u6709\u5e8f\u5217\u8868", "fa fa-list-ol", !1, !1, !1, "InsertOrderedList")), l = a(d("\u65e0\u5e8f\u5217\u8868", "fa fa-list-ul",
            !1, !1, !1, "InsertUnorderedList")); S.append(l).append(g); var T = e.clone(), g = a(d("\u5de6\u5bf9\u9f50", "fa fa-align-left", !1, !1, !1, "JustifyLeft")), l = a(d("\u5c45\u4e2d", "fa fa-align-center", !1, !1, !1, "JustifyCenter")), E = a(d("\u53f3\u5bf9\u9f50", "fa fa-align-right", !1, !1, !1, "JustifyRight")); T.append(g).append(l).append(E); var U = e.clone(), V = I + "LinkModal", g = a(d("\u63d2\u5165\u94fe\u63a5", "fa fa-link", !1, "#" + V)), l = a(d("\u5220\u9664\u94fe\u63a5", "fa fa-unlink", !1, !1, !1, "unlink")); U.append(g).append(l); var W =
            e.clone(), E = I + "TableModal", g = a(d("\u63d2\u5165\u8868\u683c", "fa fa-table", !1, "#" + E)); W.append(g); var X = e.clone(), l = I + "imgModal", g = a(d("\u63d2\u5165\u56fe\u7247", "fa fa-image", !1, "#" + l)); X.append(g); var Y = e.clone(), g = I + "codeModal", M = a(d("\u63d2\u5165\u4ee3\u7801", void 0, !1, "#" + g, '<i class="fa fa-angle-left"></i>%<i class="fa fa-angle-right"></i>')); Y.append(M); e = e.clone(); M = a(d("\u64a4\u9500", "fa fa-undo", !1, !1, !1, "Undo")); d = a(d("\u6062\u590d", "fa fa-repeat", !1, !1, !1, "Redo")); e.append(M).append(d);
            var G = a('<div class="btn-toolbar" style="padding:5px;margin-top:0px;margin-bottom:0px;"></div>'); G.append(p).append(s).append(x).append(q).append(F).append(S).append(T).append(U).append(W).append(X).append(Y).append(e); B.append(G).find("button[title]").tooltip({ container: "body" }); var d = a("<div></div>"), e = function (k, c, n, b) {
                r(k); r(c); k = a('<div id="' + k + '" class="modal fade" role="dialog">'); var d = a('<div class="modal-dialog">'); k.append(d); var e = a('<div class="modal-content">'); d.append(e); c = a('<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4>' +
                c + "</h4></div>"); var f = a('<div class="modal-body">'), g = a('<div class="modal-footer">'); e.append(c); n && "number" === typeof n.length && 0 < n.length && (a.each(n, function (a, c) { f.append(c) }), e.append(f)); b && "number" === typeof b.length && 0 < b.length && (a.each(b, function (a, c) { g.append(c) }), e.append(g)); return k
            }, x = a("<p>\u94fe\u63a5\u5730\u5740\uff1a</p>"), Z = a('<input type="text" placeholder="http(s)://" class="form-control"/>'), s = [x, Z], x = a('<a href="#" class="btn btn-primary">\u63d2\u5165\u94fe\u63a5</a>'), $ = e(V,
            "\u63d2\u5165\u94fe\u63a5", s, [x]), s = a("<span>\u884c\u6570\uff1a</span>"), aa = a('<input type="text" style="width:50px;" value="3"/>'), p = a("<span>&nbsp;&nbsp;&nbsp;&nbsp;\u5217\u6570\uff1a</span>"), ba = a('<input type="text" style="width:50px;" value="5"/>'), q = a("<span>&nbsp;&nbsp;&nbsp;&nbsp;\u9996\u884c\u52a0\u7c97 </span>"), ca = a('<input type="checkbox" checked="checked"/>'), p = [s, aa, p, ba, q, ca], s = a('<a href="#" class="btn btn-primary">\u63d2\u5165\u8868\u683c</a>'), da = e(E, "\u63d2\u5165\u8868\u683c", p,
            [s]), p = a("<p>\u8f93\u5165\u56fe\u7247URL\u5730\u5740\uff1a</p>"), ea = a('<input type="text" placeholder="http(s)://" class="form-control"/>'), q = [p, ea], p = a('<a href="#" class="btn btn-primary">\u63d2\u5165</a>'), fa = e(l, "\u63d2\u5165\u56fe\u7247", q, [p]), l = a("<div></div>"), q = a("<span>\u8bed\u8a00\uff1a</span>"), N = a('<select class="input-medium"></select>'), E = a("<span>&nbsp;&nbsp;\u4e3b\u9898\uff1a</span>"), O = a('<select class="input-medium"></select>'); l.append(q).append(N).append(E).append(O); var P = a('<textarea rows="10" class="form-control"></textarea>'),
            q = [l, P], l = a('<a href="#" class="btn btn-primary">\u63d2\u5165</a>'), ga = e(g, "\u63d2\u5165\u4ee3\u7801", q, [l]); d.append($).append(fa).append(ga).append(da); B.append(d); d = a('<div style="width: 100%; height: ' + b.frameHeight + ';"></div>'); e = a('<iframe frameborder="0" width="100%" height="100%"></iframe>'); g = b.initStr; d.append(e); var H, h, J = b.codeTargetId && "string" === typeof b.codeTargetId ? a("#" + b.codeTargetId) : !1, u, Q, L; f.wangHighLighter && function () {
                var k = f.wangHighLighter.getLangArray(), c = [], b = f.wangHighLighter.getThemeArray(),
                d = []; a.each(k, function (a, k) { c.push('<option value="' + k + '">' + k + "</option>") }); N.append(a(c.join(""))); a.each(b, function (a, c) { d.push('<option value="' + c + '">' + c + "</option>") }); O.append(a(d.join("")))
            }(); this.css({ border: "1px solid #cccccc" }); this.append(B); this.append(d); H = e[0].contentWindow; B = a(H); h = H.document; d = a(h); h.open(); h.write('<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title></title></head><body>' + g + "</body></html>"); h.close(); h.designMode = "on"; a(f).load(function () {
                "off" ===
                h.designMode.toLowerCase() && (h.designMode = "on")
            }); u = function (a, c, b) { h.execCommand(a, c, b); t(a); m() }; Q = function (a, c) { a.after(c); t(); m() }; B.blur(m); B.focus(y); d.on("click keyup", function (a) { var c = a.type; a = a.keyCode; var b = !1, b = [33, 34, 35, 36, 37, 38, 39, 40, 8, 46], b = "keyup" === c && -1 !== b.indexOf(a); if ("click" === c || b) t(), y() }); G.find("button[singleCommandName]").each(function () { var b = a(this), c = b.attr("singleCommandName"); c && b.click(function () { u(c) }) }); D.find("a").each(function () {
                var b = a(this), c = this.style.color;
                b.click(function (a) { u("ForeColor", !1, c); a.preventDefault() })
            }); w.find("a").each(function () { var b = a(this), c = b.children().first()[0].style.backgroundColor; b.click(function (a) { u("backColor", !1, c); a.preventDefault() }) }); C.find("a").each(function () { var b = a(this), c = b.css("font-family"); b.click(function (a) { u("FontName", !1, c); a.preventDefault() }) }); K.find("a").each(function () { var b = a(this), c = b.attr("fontSize"); b.click(function (a) { u("FontSize", !1, c); a.preventDefault() }) }); x.click(function (a) {
                var c = Z.val();
                z(); u("createLink", !1, c); a.preventDefault(); $.modal("hide")
            }); s.click(function (b) {
                var c; c = aa.val(); c = isNaN(+c) ? 3 : c; var d = ba.val(), d = isNaN(+d) ? 5 : d, e = ca.is(":checked"), f, g; f = ""; var h, l = [], m = [], p = '<td style="width:100px; ${style}">&nbsp;</td>'; h = '<table border="0" cellpadding="0" cellspacing="0" style="${style}" > ${content} </table>'.replace("${style}", "border-left:1px solid #cccccc;border-top:1px solid #cccccc;"); p = p.replace("${style}", "border-bottom:1px solid #cccccc;border-right:1px solid #cccccc;");
                for (f = 0; f < c; f++) { m = []; for (g = 0; g < d; g++) m.push(p); 0 === f && e ? l.push('<tr style="font-weight:bold;background-color:#f1f1f1;">${content}</tr>'.replace("${content}", m.join(""))) : l.push("<tr>${content}</tr>".replace("${content}", m.join(""))) } f = h.replace("${content}", l.join("")); if (c = v()) c = A(c), 0 === c.next().length && (f += "<p>&nbsp;</p>"), Q(c, a(f)); b.preventDefault(); da.modal("hide")
            }); p.click(function (a) { var c = ea.val(); z(); u("insertImage", !1, c); a.preventDefault(); fa.modal("hide") }); l.click(function (b) {
                var c;
                c = N.val(); var d = O.val(), e = P.val(); P.val(""); if (!f.wangHighLighter) throw Error("\u672a\u5f15\u7528wangHighLighter.js\uff0c\u65e0\u6cd5\u683c\u5f0f\u5316\u4ee3\u7801..."); e = f.wangHighLighter.highLight(c, d, e); if (c = v()) c = A(c), 0 === c.next().length && (e += "<p>&nbsp;</p>"), Q(c, a(e)); b.preventDefault(); ga.modal("hide")
            })
        }
    } a.fn.extend({ wangEditor: y })
})(window, window.jQuery);